{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';var Draggable=/*#__PURE__*/function(_React$PureComponent){_inherits(Draggable,_React$PureComponent);var _super=_createSuper(Draggable);function Draggable(){var _this;_classCallCheck(this,Draggable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={droppable:null};_this.drop=function(){try{if(!_this.state.droppable){console.log('DnD Inventory: Neteisingas numetamas elementas');//mp.trigger('client:inventory:notify', 'DnD Inventory: Некорректный droppable элемент'); // eslint-disable-line\nreturn false;}var inventory=_this.props.that;// Доступ к инвентарю\nvar type=_this.props.type;var item=_this.props.item;if(!item||!type||!inventory){console.log('DnD Inventory: Trūksta vienos iš savybių');//mp.trigger('client:inventory:notify', 'DnD Inventory: Отсутствует одно из свойств'); // eslint-disable-line\nreturn false;}var validTypes=['put_on','take_off','move','move_all','take','take_all','equip','unequip','drop'];var id=_this.state.droppable.id;if(!validTypes.includes(id)){console.log('DnD Inventory: Neteisingas ID');//mp.trigger('client:inventory:notify', 'DnD Inventory: Неверное ID'); // eslint-disable-line\nreturn false;}// Для unequip\nif(id.match('take_off')&&type.includes('unequip')){id='unequip';}// Мультиайдишная система для Droppable с багажника в инвентарь\nif(id.match('take_off')&&!type.includes('take_off')){id='take';}// Если стак перекладываем - то move_all\nif(id.match('move')&&type.includes('move_all')){id='move_all';}// Если стак берём - то take_all\nif(id.match('take')&&type.includes('take_all')){id='take_all';}// Если Droppable не предназначена для этого Draggable\nif(!type.includes(id)){console.log('DnD Inventory: Tipas neatitinka ID');//mp.trigger('client:inventory:notify', 'Тип не совпадает с ID'); // eslint-disable-line\nreturn false;}// Ответы на действие\nswitch(id){case'put_on':// Надеть\ntry{// Внимание. Чтобы точно никакие вещи не надевались из багажника - удалите экшены \"Надеть\" у предметов во втором инвентаре.\nif(inventory.getActions(item,'inventory').includes(id)){inventory.itemPutOn(item,'inventory');}}catch(_unused){inventory.itemPutOn(item,'secondary_inv');}break;case'take_off':// Снять\ninventory.itemTakeOff(item,'outfit');break;case'move':// Переложить\nif(item.item_id!==undefined){inventory.moveItem(item,'inventory');}else{// Закомментируйте, если НЕ нужно, чтобы одежду можно было перекладывать с тела в багажник\n// inventory.moveItem(item, 'outfit')\n}break;case'move_all':// Переложить стак\ninventory.moveAllItem(false,item);break;case'take':// Взять с багажника\nif(item.item_id!==undefined){inventory.moveToInventory(item,'secondary_inv');}break;case'take_all':// Взять с багажника стак\ninventory.moveAllToInventory(false,item);break;case'equip':// Экипировать\ninventory.itemEquip(item,'inventory');break;case'unequip':// Убрать экипировку в инвентарь\ninventory.itemUnequip(item,'weapon');break;case'drop':// Выбросить\nif(type.includes('unequip')){inventory.itemDrop(item,'weapon');}else if(type.includes('move')||type.includes('move_all')){inventory.itemDrop(item,'inventory');}else if(type.includes('take_off')){inventory.itemDrop(item,'outfit');}else if(type.includes('take')||type.includes('take_all')){inventory.itemDrop(item,'secondary_inv');}break;default:break;}return true;}catch(e){//mp.trigger('client:inventory:notify', 'TEST: ' + e.toString()); // eslint-disable-line\n}return false;};_this.onMouseDown=function(event){try{//mp.trigger('client:inventory:notify', 'YES:START'); // eslint-disable-line\nvar moveAt=function moveAt(clientX,clientY){clone.style.left=clientX-shiftX+'px';clone.style.top=clientY-shiftY+'px';};var onMouseMove=function onMouseMove(event){moveAt(event.clientX,event.clientY);clone.hidden=true;var elemBelow=document.elementFromPoint(event.clientX,event.clientY);clone.hidden=false;////mp.trigger('client:inventory:notify', `BELOW: ${elemBelow}`); // eslint-disable-line\nif(!elemBelow)return;var droppableBelow=elemBelow.closest('.droppable');var currentDroppable=that.state.droppable;//mp.trigger('client:inventory:notify', `BELOW1: ${currentDroppable}`); // eslint-disable-line\n//mp.trigger('client:inventory:notify', `BELOW2: ${droppableBelow}`); // eslint-disable-line\n//mp.trigger('client:inventory:notify', `BELOW3: ${currentDroppable !== droppableBelow}`); // eslint-disable-line\nif(currentDroppable!==droppableBelow){if(currentDroppable){that.setState({droppable:null});}currentDroppable=droppableBelow;if(currentDroppable){that.setState({droppable:currentDroppable});}}};//mp.trigger('client:inventory:notify', 'event.button !== 0 ' + event.button !== 0); // eslint-disable-line\nif(event.button!==0)return;var element=document.getElementById(_this.props.id);var clone=element.cloneNode(true);clone.canDrop=true;var shiftX=event.clientX-element.getBoundingClientRect().left;var shiftY=event.clientY-element.getBoundingClientRect().top;clone.style.position='absolute';clone.style.zIndex=1000;if(clone.id.includes('weaponplayer')){clone.style.width='350px';}document.body.append(clone);var that=_assertThisInitialized(_this);moveAt(event.clientX,event.clientY);document.addEventListener('mousemove',onMouseMove);document.onmouseup=function(){try{if(clone.canDrop){document.removeEventListener('mousemove',onMouseMove);clone.onmouseup=null;clone.canDrop=false;clone.remove();//mp.trigger('client:inventory:notify', `MOUSE UP2`); // eslint-disable-line\nthat.drop();}}catch(e){//mp.trigger('client:inventory:notify', `DROP ERROR2: ` + e.toString()); // eslint-disable-line\n}};/*clone.onmouseup = function() {\n                try {\n                    document.removeEventListener('mousemove', onMouseMove)\n                    clone.onmouseup = null\n                    clone.remove()\n\n                    //mp.trigger('client:inventory:notify', `MOUSE UP`); // eslint-disable-line\n                    that.drop()\n                }\n                catch (e) {\n                    //mp.trigger('client:inventory:notify', `DROP ERROR: ` + e.toString()); // eslint-disable-line\n                }\n            }*/}catch(e){//mp.trigger('client:inventory:notify', 'TEST2: ' + e.toString()); // eslint-disable-line\n}};_this.onDragStart=function(){//mp.trigger('client:inventory:notify', 'ON MOUSE START????'); // eslint-disable-line\nreturn false;};return _this;}_createClass(Draggable,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){console.log(this.props.children);//mp.trigger('client:inventory:notify', 'CHG: ' + JSON.stringify(this.props.children)); // eslint-disable-line\n}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:this.props.id,onDragStart:this.onDragStart,onMouseDown:this.onMouseDown},this.props.children);}}]);return Draggable;}(React.PureComponent);export{Draggable as default};","map":{"version":3,"sources":["C:/Users/Skaidrius/Downloads/ragemppro_dednet/STATE-RAGE-UI-master-fixed/src/components/inventory/Dnd/Draggable/index.jsx"],"names":["React","Draggable","state","droppable","drop","console","log","inventory","props","that","type","item","validTypes","id","includes","match","getActions","itemPutOn","itemTakeOff","item_id","undefined","moveItem","moveAllItem","moveToInventory","moveAllToInventory","itemEquip","itemUnequip","itemDrop","e","onMouseDown","event","moveAt","clientX","clientY","clone","style","left","shiftX","top","shiftY","onMouseMove","hidden","elemBelow","document","elementFromPoint","droppableBelow","closest","currentDroppable","setState","button","element","getElementById","cloneNode","canDrop","getBoundingClientRect","position","zIndex","width","body","append","addEventListener","onmouseup","removeEventListener","remove","onDragStart","children","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class Draggable extends React.PureComponent {\n\n    state = {\n        droppable: null\n    }\n\n    componentWillUnmount() {\n        console.log(this.props.children)\n        //mp.trigger('client:inventory:notify', 'CHG: ' + JSON.stringify(this.props.children)); // eslint-disable-line\n    }\n\n    drop = () => {\n        try {\n            if (!this.state.droppable) {\n                console.log('DnD Inventory: Neteisingas numetamas elementas')\n                //mp.trigger('client:inventory:notify', 'DnD Inventory: Некорректный droppable элемент'); // eslint-disable-line\n                return false\n            }\n\n            let inventory = this.props.that // Доступ к инвентарю\n            const type = this.props.type\n            let item = this.props.item\n\n            if (!item || !type || !inventory) {\n                console.log('DnD Inventory: Trūksta vienos iš savybių')\n                //mp.trigger('client:inventory:notify', 'DnD Inventory: Отсутствует одно из свойств'); // eslint-disable-line\n                return false\n            }\n\n            const validTypes = ['put_on', 'take_off', 'move', 'move_all', 'take', 'take_all', 'equip', 'unequip', 'drop']\n\n            let id = this.state.droppable.id\n\n            if (!validTypes.includes(id)) {\n                console.log('DnD Inventory: Neteisingas ID')\n                //mp.trigger('client:inventory:notify', 'DnD Inventory: Неверное ID'); // eslint-disable-line\n                return false\n            }\n\n            // Для unequip\n            if (id.match('take_off') && type.includes('unequip')) {\n                id = 'unequip'\n            }\n\n            // Мультиайдишная система для Droppable с багажника в инвентарь\n            if (id.match('take_off') && !type.includes('take_off')) {\n                id = 'take'\n            }\n\n            // Если стак перекладываем - то move_all\n            if (id.match('move') && type.includes('move_all')) {\n                id = 'move_all'\n            }\n\n            // Если стак берём - то take_all\n            if (id.match('take') && type.includes('take_all')) {\n                id = 'take_all'\n            }\n\n            // Если Droppable не предназначена для этого Draggable\n            if (!type.includes(id)) {\n                console.log('DnD Inventory: Tipas neatitinka ID')\n                //mp.trigger('client:inventory:notify', 'Тип не совпадает с ID'); // eslint-disable-line\n                return false\n            }\n\n            // Ответы на действие\n            switch (id) {\n\n                case 'put_on': // Надеть\n                    try { // Внимание. Чтобы точно никакие вещи не надевались из багажника - удалите экшены \"Надеть\" у предметов во втором инвентаре.\n                        if (inventory.getActions(item, 'inventory').includes(id)) {\n                            inventory.itemPutOn(item, 'inventory')\n                        }\n                    } catch { inventory.itemPutOn(item, 'secondary_inv') }\n                    break\n\n                case 'take_off': // Снять\n                    inventory.itemTakeOff(item, 'outfit')\n                    break\n\n                case 'move': // Переложить\n                    if (item.item_id !== undefined) {\n                        inventory.moveItem(item, 'inventory')\n                    } else {\n                        // Закомментируйте, если НЕ нужно, чтобы одежду можно было перекладывать с тела в багажник\n                        // inventory.moveItem(item, 'outfit')\n                    }\n                    break\n\n                case 'move_all': // Переложить стак\n                    inventory.moveAllItem(false, item)\n                    break\n\n                case 'take': // Взять с багажника\n                    if (item.item_id !== undefined) {\n                        inventory.moveToInventory(item, 'secondary_inv')\n                    }\n                    break\n\n                case 'take_all': // Взять с багажника стак\n                    inventory.moveAllToInventory(false, item)\n                    break\n\n                case 'equip': // Экипировать\n                    inventory.itemEquip(item, 'inventory')\n                    break\n\n                case 'unequip': // Убрать экипировку в инвентарь\n                    inventory.itemUnequip(item, 'weapon')\n                    break\n\n                case 'drop': // Выбросить\n                    if (type.includes('unequip')) {\n                        inventory.itemDrop(item, 'weapon')\n                    } else if (type.includes('move') || type.includes('move_all')) {\n                        inventory.itemDrop(item, 'inventory')\n                    } else if (type.includes('take_off')) {\n                        inventory.itemDrop(item, 'outfit')\n                    } else if (type.includes('take') || type.includes('take_all')) {\n                        inventory.itemDrop(item, 'secondary_inv')\n                    }\n                    break\n\n                default:\n                    break\n            }\n\n            return true\n        }\n        catch (e) {\n\n            //mp.trigger('client:inventory:notify', 'TEST: ' + e.toString()); // eslint-disable-line\n        }\n        return false;\n    }\n\n    onMouseDown = (event) => {\n        try {\n            //mp.trigger('client:inventory:notify', 'event.button !== 0 ' + event.button !== 0); // eslint-disable-line\n            if (event.button !== 0) return\n\n            let element = document.getElementById(this.props.id)\n            let clone = element.cloneNode(true)\n            clone.canDrop = true;\n\n            let shiftX = event.clientX - element.getBoundingClientRect().left\n            let shiftY = event.clientY - element.getBoundingClientRect().top\n\n            clone.style.position = 'absolute'\n            clone.style.zIndex = 1000\n\n            if (clone.id.includes('weaponplayer')) {\n                clone.style.width = '350px'\n            }\n\n            document.body.append(clone)\n\n            let that = this\n\n            moveAt(event.clientX, event.clientY)\n\n\n            //mp.trigger('client:inventory:notify', 'YES:START'); // eslint-disable-line\n\n            function moveAt(clientX, clientY) {\n                clone.style.left = clientX - shiftX + 'px'\n                clone.style.top = clientY - shiftY + 'px'\n            }\n\n            function onMouseMove(event) {\n                moveAt(event.clientX, event.clientY)\n\n                clone.hidden = true\n                let elemBelow = document.elementFromPoint(event.clientX, event.clientY)\n                clone.hidden = false\n\n                ////mp.trigger('client:inventory:notify', `BELOW: ${elemBelow}`); // eslint-disable-line\n\n                if (!elemBelow) return\n\n                let droppableBelow = elemBelow.closest('.droppable')\n                let currentDroppable = that.state.droppable\n\n\n                //mp.trigger('client:inventory:notify', `BELOW1: ${currentDroppable}`); // eslint-disable-line\n                //mp.trigger('client:inventory:notify', `BELOW2: ${droppableBelow}`); // eslint-disable-line\n                //mp.trigger('client:inventory:notify', `BELOW3: ${currentDroppable !== droppableBelow}`); // eslint-disable-line\n\n                if (currentDroppable !== droppableBelow) {\n                    if (currentDroppable) {\n                        that.setState({\n                            droppable: null\n                        })\n                    }\n\n                    currentDroppable = droppableBelow\n\n                    if (currentDroppable) {\n                        that.setState({\n                            droppable: currentDroppable\n                        })\n                    }\n                }\n            }\n\n            document.addEventListener('mousemove', onMouseMove)\n\n            document.onmouseup = function() {\n                try {\n                    if (clone.canDrop) {\n                        document.removeEventListener('mousemove', onMouseMove);\n                        clone.onmouseup = null;\n                        clone.canDrop = false;\n                        clone.remove();\n                        //mp.trigger('client:inventory:notify', `MOUSE UP2`); // eslint-disable-line\n                        that.drop()\n                    }\n                }\n                catch (e) {\n                    //mp.trigger('client:inventory:notify', `DROP ERROR2: ` + e.toString()); // eslint-disable-line\n                }\n            };\n\n            /*clone.onmouseup = function() {\n                try {\n                    document.removeEventListener('mousemove', onMouseMove)\n                    clone.onmouseup = null\n                    clone.remove()\n\n                    //mp.trigger('client:inventory:notify', `MOUSE UP`); // eslint-disable-line\n                    that.drop()\n                }\n                catch (e) {\n                    //mp.trigger('client:inventory:notify', `DROP ERROR: ` + e.toString()); // eslint-disable-line\n                }\n            }*/\n        }\n        catch (e) {\n            //mp.trigger('client:inventory:notify', 'TEST2: ' + e.toString()); // eslint-disable-line\n        }\n    }\n\n    onDragStart = () => {\n        //mp.trigger('client:inventory:notify', 'ON MOUSE START????'); // eslint-disable-line\n        return false\n    }\n    \n    render() {\n        return (\n            <div\n                id={this.props.id}\n                onDragStart={this.onDragStart}\n                onMouseDown={this.onMouseDown}\n            >\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nDraggable.propTypes = {\n    id: PropTypes.string,\n    type: PropTypes.string,\n    item: PropTypes.object,\n    children: PropTypes.node\n}"]},"metadata":{},"sourceType":"module"}