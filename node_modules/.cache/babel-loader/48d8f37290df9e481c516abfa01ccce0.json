{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import Loader from'../Android/Loader';var AddChat=/*#__PURE__*/function(_React$Component){_inherits(AddChat,_React$Component);var _super=_createSuper(AddChat);function AddChat(props){var _this;_classCallCheck(this,AddChat);_this=_super.call(this,props);_this.state={number:'',message:'',message_timeout:false,loading:false};return _this;}_createClass(AddChat,[{key:\"componentDidCatch\",value:function componentDidCatch(error,errorInfo){mp.trigger('client:ui:debug','AddChat.jsx',error,errorInfo);// eslint-disable-line\n}},{key:\"inputNumber\",value:function inputNumber(number){if(number.target.value.toString().length>=20)return;this.setState({number:number.target.value});}},{key:\"inputMessage\",value:function inputMessage(message){if(message.target.value.toString().length>=500)return;this.setState({message:message.target.value});}},{key:\"sendMessage\",value:function sendMessage(){var _this2=this;if(this.state.message===\"\")return;if(this.state.number.toString().replace(/\\D/g,'')===\"\")return;if(this.state.message_timeout)return;// Нельзя отправлять сообщения так часто\nthis.setState({message_timeout:true,loading:true});setTimeout(function(){this.setState({message_timeout:false,loading:false});}.bind(this),2000);// 1 секунда таймаут на отправку сообщения\nvar chat=null;this.props.data.forEach(function(e){if(e.phone_number===_this2.state.number.toString().replace(/\\D/g,'')){chat=e;}});if(chat!=null){this.setState({chat:chat,render:true,contact:this.props.getContactByNumber(chat.phone_number)},function(){return _this2.setState(function(prevState){return _objectSpread({},prevState.chat.message=_toConsumableArray(_this2.state.chat.message).sort(function(a,b){if(a.date===b.date){return b.time>a.time;}return a.date<b.date?1:-1;}));});});}else{this.setState({chat:{phone_number:this.state.number.toString().replace(/\\D/g,''),is_online:false,// был(а) в сети 12.01.2019\nlast_login:'',message:[]},render:true,contact:this.props.getContactByNumber(this.state.number.toString().replace(/\\D/g,''))});}if(this.state.message.length>=500)this.setState({message:this.state.message.substr(0,500)});// Макс длинна сообщения 500 символов\nsetTimeout(function(){var text=_this2.state.message;_this2.setState(function(prev){return _objectSpread({},prev.chat.message=[{type:2,text:text,time:_this2.props.time,date:_this2.props.date}].concat(_this2.state.chat.message));},function(){_this2.props.sendMessage(_this2.state.number.toString().replace(/\\D/g,''),_this2.state.chat,text);_this2.props.historyGoBack();try{mp.trigger('client:phone:sendMessage',_this2.state.number.toString().replace(/\\D/g,''),_this2.state.chat,text);// eslint-disable-line\n}catch(e){}});},1000);}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"dedbit-menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"u-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dedbit-u-texttittle\"},/*#__PURE__*/React.createElement(\"div\",{className:\"u__back__container\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://state-99.com/client/images/icons/components/phone/img/back.svg\",className:\"u__back\",height:\"16\",onClick:function onClick(){return _this3.props.historyGoBack();}})),/*#__PURE__*/React.createElement(\"span\",{className:\"u-texttittle\"},\"Messenger\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"messenger-addchat\"},!this.state.loading?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"text-place-m-mes\"},\"\\u012Eveskite telefono numer\\u012F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"m-mes-txtfield\"},/*#__PURE__*/React.createElement(TextField,{id:\"standard-basic1\",label:\"\",value:this.state.number,placeholder:\"Telefono numeris\",className:\"text-filed\",onChange:function onChange(e){return _this3.inputNumber(e);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-place-m-mes\"},\"\\u012Eveskite \\u017Einut\\u0119\"),/*#__PURE__*/React.createElement(\"div\",{className:\"m-mes-txtfield\"},/*#__PURE__*/React.createElement(TextField,{value:this.state.message,id:\"standard-multiline-static\",label:\"\",placeholder:\"Prane\\u0161imo \\u012Fvesties laukas...\",multiline:true,rows:\"10\",onChange:function onChange(e){return _this3.inputMessage(e);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"position-btn-addchat\"},/*#__PURE__*/React.createElement(\"span\",{className:\"ios__button\",onClick:function onClick(){return _this3.sendMessage();}},\"Si\\u0173sti\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"loader-style-addchat\"},/*#__PURE__*/React.createElement(Loader,null)))));}}]);return AddChat;}(React.Component);export default AddChat;","map":{"version":3,"sources":["C:/Users/Skaidrius/Downloads/ragemppro_dednet/STATE-RAGE-UI-master-fixed/src/components/phone/components/apps/AddChat.jsx"],"names":["React","TextField","Button","Loader","AddChat","props","state","number","message","message_timeout","loading","error","errorInfo","mp","trigger","target","value","toString","length","setState","replace","setTimeout","bind","chat","data","forEach","e","phone_number","render","contact","getContactByNumber","prevState","sort","a","b","date","time","is_online","last_login","substr","text","prev","type","concat","sendMessage","historyGoBack","inputNumber","inputMessage","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Loader from '../Android/Loader';\n\nclass AddChat extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            number: '',\n            message: '',\n            message_timeout: false,\n            loading: false,\n        }\n    }\n\n    componentDidCatch(error, errorInfo) {\n        mp.trigger('client:ui:debug', 'AddChat.jsx', error, errorInfo); // eslint-disable-line\n    }\n\n    inputNumber(number) {\n        if (number.target.value.toString().length >= 20) return;\n        this.setState({ number: number.target.value })\n    }\n\n    inputMessage(message) {\n        if (message.target.value.toString().length >= 500) return;\n        this.setState({ message: message.target.value })\n    }\n\n    sendMessage() {\n        if (this.state.message === \"\") return;\n        if (this.state.number.toString().replace(/\\D/g,'') === \"\") return;\n        if (this.state.message_timeout) return; // Нельзя отправлять сообщения так часто\n        this.setState({ message_timeout: true, loading: true });\n        setTimeout(function () {\n            this.setState({ message_timeout: false, loading: false })\n        }.bind(this), 2000); // 1 секунда таймаут на отправку сообщения\n\n        let chat = null;\n        this.props.data.forEach((e) => {\n            if (e.phone_number === this.state.number.toString().replace(/\\D/g,'')) {\n                chat = e;\n            }\n        })\n        if (chat != null) {\n            this.setState({\n                chat: chat,\n                render: true,\n                contact: this.props.getContactByNumber(chat.phone_number)\n            }, () => this.setState(prevState => ({\n                ...prevState.chat.message = [...this.state.chat.message]\n                    .sort(\n                        function (a, b) {\n                            if (a.date === b.date) {\n                                return b.time > a.time;\n                            }\n                            return a.date < b.date ? 1 : -1;\n                        })\n            })))\n        } else {\n            this.setState({\n                chat: {\n                    phone_number: this.state.number.toString().replace(/\\D/g,''),\n                    is_online: false, // был(а) в сети 12.01.2019\n                    last_login: '',\n                    message: []\n                },\n                render: true,\n                contact: this.props.getContactByNumber(this.state.number.toString().replace(/\\D/g,''))\n            })\n        }\n        \n        if (this.state.message.length >= 500)\n            this.setState({ message: this.state.message.substr(0, 500) }); // Макс длинна сообщения 500 символов\n\n        setTimeout(() => {\n            let text = this.state.message;\n\n            this.setState(prev => ({\n                ...prev.chat.message = [{\n                    type: 2,\n                    text: text,\n                    time: this.props.time,\n                    date: this.props.date,\n                }].concat(this.state.chat.message)\n            }), () => {\n                this.props.sendMessage(this.state.number.toString().replace(/\\D/g,''), this.state.chat, text);\n                this.props.historyGoBack();\n\n                try {\n                    mp.trigger('client:phone:sendMessage', this.state.number.toString().replace(/\\D/g,''), this.state.chat, text); // eslint-disable-line\n                } catch (e) {\n                }\n            });\n        }, 1000);\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <div className=\"dedbit-menu\">\n                    <div className=\"u-title\">\n                        <div className=\"dedbit-u-texttittle\">\n                            <div className=\"u__back__container\">\n                                <img src={`https://state-99.com/client/images/icons/components/phone/img/back.svg`} className=\"u__back\" height=\"16\" onClick={() => this.props.historyGoBack()} />\n                            </div>\n                            <span className=\"u-texttittle\">Messenger</span>\n                        </div>\n                    </div>\n                    <div className=\"messenger-addchat\">\n                        {!this.state.loading ? \n                        <React.Fragment>\n                        <div className=\"text-place-m-mes\">Įveskite telefono numerį</div>\n                        <div className=\"m-mes-txtfield\">\n                            <TextField id=\"standard-basic1\" label=\"\" value={this.state.number}\n                                placeholder=\"Telefono numeris\" className=\"text-filed\"\n                                onChange={(e) => this.inputNumber(e)}\n                            />\n                        </div>\n                        <div className=\"text-place-m-mes\">Įveskite žinutę</div>\n                        <div className=\"m-mes-txtfield\">\n                            <TextField\n                                value={this.state.message}\n                                id=\"standard-multiline-static\"\n                                label=\"\"\n                                placeholder=\"Pranešimo įvesties laukas...\"\n                                multiline\n                                rows=\"10\"\n                                onChange={(e) => this.inputMessage(e)}\n                            />\n                        </div>\n                        <div className=\"position-btn-addchat\">\n                            <span className=\"ios__button\" onClick={() => this.sendMessage()}>Siųsti</span>                      \n                        </div>\n                        </React.Fragment>\n                        :\n                        <div className=\"loader-style-addchat\">\n                            <Loader />\n                        </div>\n                        }\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default AddChat;\n"]},"metadata":{},"sourceType":"module"}