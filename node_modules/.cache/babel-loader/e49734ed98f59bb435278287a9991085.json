{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Skaidrius\\\\Downloads\\\\ragemppro_dednet\\\\STATE-RAGE-UI-master-fixed\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import EventManager from\"../../../EventManager\";import $ from'jquery';var Chat=/*#__PURE__*/function(_React$Component){_inherits(Chat,_React$Component);var _super=_createSuper(Chat);function Chat(props){var _this;_classCallCheck(this,Chat);_this=_super.call(this,props);_this.state={show:true,fontFamily:'Roboto',fontSize:12,lineHeight:14,fontWeight:400,fontOutline:true,bgState:1,bgOpacity:0.5,opacity:1,width:30,height:30,//timeoutHidden: 99999000,\ntimeoutHidden:5000};return _this;}_createClass(Chat,[{key:\"componentDidCatch\",value:function componentDidCatch(error,errorInfo){mp.trigger('client:ui:debug','Chat.jsx',error,errorInfo);// eslint-disable-line\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){EventManager.removeHandler('chat');}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var chat={size:0,history_limit:50,//Change this if you want to hold more/less chat history\ncontainer:null,input:null,enabled:false,active:true,bgState:this.state.bgState,bgOpacity:this.state.bgOpacity,timeoutHidden:this.state.timeoutHidden};var closeTimeout=null;if(chat.bgState===2)$('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, \"+chat.bgOpacity+\")\");EventManager.addHandler('chat',function(value){if(value.type=='hideHud'){document.getElementById('chat').style.display='none';}if(value.type=='showHud'){document.getElementById('chat').style.display='block';}if(value.type=='updateSettings'){_this2.setState({fontFamily:value.fontFamily,fontSize:value.fontSize,lineHeight:value.lineHeight,fontWeight:value.fontWeight,fontOutline:value.fontOutline,bgState:value.bgState,bgOpacity:value.bgOpacity,opacity:value.opacity,width:value.width,height:value.height,timeoutHidden:value.timeoutHidden});chat.bgState=value.bgState;chat.bgOpacity=value.bgOpacity;chat.timeoutHidden=value.timeoutHidden;if(chat.bgState===2)$('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, \"+chat.bgOpacity+\")\");else $('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, 0)\");$(\"#chat_messages\").fadeIn('fast');if(closeTimeout){clearTimeout(closeTimeout);closeTimeout=null;}if(chat.timeoutHidden<99999000){closeTimeout=setTimeout(function(){$(\"#chat_messages\").fadeOut('slow');},chat.timeoutHidden);}}if(value.type=='push'){chatAPI.push(value.message);}if(value.type=='activate'){chatAPI.activate(value.enable);}if(value.type=='show'){chatAPI.show(value.toggle);}if(value.type=='clear'){chatAPI.clear();}else return;});function enableChatInput(enable){try{mp.trigger(\"chatEnabled\",enable);// eslint-disable-line\n}catch(e){console.log(e);}try{if(enable){if(closeTimeout){clearTimeout(closeTimeout);closeTimeout=null;}$(\"#chat_messages\").fadeIn('fast');}else{$(\"#chat_messages\").fadeIn('fast');if(closeTimeout){clearTimeout(closeTimeout);closeTimeout=null;}if(chat.timeoutHidden<99999000){closeTimeout=setTimeout(function(){$(\"#chat_messages\").fadeOut('slow');},chat.timeoutHidden);}}if(chat.active==false&&enable==true)return;if(enable!=(chat.input!=null)){//chat_printing = enable;\ntry{mp.invoke(\"focus\",enable);// eslint-disable-line\n}catch(e){console.log(e);}if(enable){chat.input=$(\"#chat\").append('<div><input onkeyup=\"chatOnKeyUp()\" id=\"chat_msg\" type=\"text\" /></div>').children(\":last\");chat.input.children(\"input\").focus();if(chat.bgState===1)$('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, \"+chat.bgOpacity+\")\");else if(chat.bgState===2)$('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, \"+chat.bgOpacity+\")\");else $('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, 0)\");}else{chat.input.fadeOut('fast',function(){chat.input.remove();chat.input=null;});if(chat.bgState===1)$('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, 0)\");else if(chat.bgState===2)$('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, \"+chat.bgOpacity+\")\");else $('#chat_messages').css(\"background-color\",\"rgba(0, 0, 0, 0)\");}}}catch(e){console.log(e);}}var timeOut=null;function chatOnKeyUp(){try{if(timeOut){clearTimeout(timeOut);timeOut=null;}else mp.trigger('client:chatTyping',true);// eslint-disable-line\ntimeOut=setTimeout(function(){mp.trigger('client:chatTyping',false);// eslint-disable-line\ntimeOut=null;},1000);}catch(e){console.log(e);}}function getIndicesOf(searchStr,str,caseSensitive){var searchStrLen=searchStr.length;if(searchStrLen==0){return[];}var startIndex=0,index,indices=[];if(!caseSensitive){str=str.toLowerCase();searchStr=searchStr.toLowerCase();}while((index=str.indexOf(searchStr,startIndex))>-1){indices.push(index);startIndex=index+searchStrLen;}return indices;}var chatAPI={push:function push(text){try{var textResult=escapeHtml(text);var matchColors=/!\\{#\\w*\\}/gi;var match=textResult.match(matchColors);if(match!==null){for(var i=0;i<match.length;i++){var clr=match[i].replace(match[i],match[i].replace('!{','').replace('}',''));textResult=textResult.replace(match[i],'<span style=\"color: '+clr+'\">');}for(var _i=0;_i<match.length;_i++){textResult+='</span>';}}matchColors=/!\\{\\w*\\}/gi;match=textResult.match(matchColors);if(match!==null){for(var _i2=0;_i2<match.length;_i2++){var _clr=match[_i2].replace(match[_i2],match[_i2].replace('!{','').replace('}',''));textResult=textResult.replace(match[_i2],'<span style=\"color: #'+_clr+'\">');}for(var _i3=0;_i3<match.length;_i3++){textResult+='</span>';}}chat.container.prepend(\"<li>\"+textResult+\"</li>\");chat.size++;if(chat.size>=chat.history_limit){chat.container.children(\":last\").remove();}$(\"#chat_messages\").fadeIn('fast');if(closeTimeout){clearTimeout(closeTimeout);closeTimeout=null;}if(chat.timeoutHidden<99999000){closeTimeout=setTimeout(function(){$(\"#chat_messages\").fadeOut('slow');},chat.timeoutHidden);}}catch(e){console.log(e);}},clear:function clear(){try{chat.container.html(\"\");}catch(e){console.log(e);}},activate:function activate(toggle){try{if(toggle==false&&chat.input!=null)enableChatInput(false);chat.active=toggle;}catch(e){console.log(e);}},show:function show(toggle){try{if(toggle)$(\"#chat\").show();else $(\"#chat\").hide();chat.active=toggle;}catch(e){console.log(e);}}};var entityMap={'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',\"'\":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'};function escapeHtml(string){return String(string).replace(/[&<>\"'`=\\/]/g,function(s){return entityMap[s];});}$(document).ready(function(){chat.container=$(\"#chat ul#chat_messages\");$(\".ui_element\").show();chatAPI.push(\"Sveiki atvykę į RevolutionRP\");chatAPI.push(\"Perskaitykite ir laikykitės serverio taisyklių\");$(\"body\").keydown(function(event){if(event.which==84&&chat.input==null&&chat.active==true){enableChatInput(true);event.preventDefault();}else if(event.which==13&&chat.input!=null){var value=chat.input.children(\"input\").val();if(value.length>0){if(value[0]==\"/\"){value=value.substr(1);if(value.length>0){try{mp.invoke(\"command\",value);// eslint-disable-line\n}catch(e){console.log(e);}}}else{try{mp.invoke(\"chatMessage\",value);// eslint-disable-line\n}catch(e){console.log(e);}}}enableChatInput(false);}});});}},{key:\"render\",value:function render(){if(!this.state.show){return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"chat\",style:{width:this.state.width+'%',height:this.state.height+'%',opacity:this.state.opacity,fontWeight:this.state.fontWeight+'px',fontFamily:this.state.fontFamily,fontSize:this.state.fontSize+'px',lineHeight:this.state.lineHeight+'px'},className:\"ui_element\"},/*#__PURE__*/React.createElement(\"ul\",{id:\"chat_messages\"})));}}]);return Chat;}(React.Component);export default Chat;","map":{"version":3,"sources":["C:/Users/Skaidrius/Downloads/ragemppro_dednet/STATE-RAGE-UI-master-fixed/src/components/hud/components/Chat.jsx"],"names":["React","EventManager","$","Chat","props","state","show","fontFamily","fontSize","lineHeight","fontWeight","fontOutline","bgState","bgOpacity","opacity","width","height","timeoutHidden","error","errorInfo","mp","trigger","removeHandler","chat","size","history_limit","container","input","enabled","active","closeTimeout","css","addHandler","value","type","document","getElementById","style","display","setState","fadeIn","clearTimeout","setTimeout","fadeOut","chatAPI","push","message","activate","enable","toggle","clear","enableChatInput","e","console","log","invoke","append","children","focus","remove","timeOut","chatOnKeyUp","getIndicesOf","searchStr","str","caseSensitive","searchStrLen","length","startIndex","index","indices","toLowerCase","indexOf","text","textResult","escapeHtml","matchColors","match","i","clr","replace","prepend","html","hide","entityMap","string","String","s","ready","keydown","event","which","preventDefault","val","substr","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport EventManager from \"../../../EventManager\";\nimport $ from 'jquery';\n\nclass Chat extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            show: true,\n\n            fontFamily: 'Roboto',\n            fontSize: 12,\n            lineHeight: 14,\n            fontWeight: 400,\n            fontOutline: true,\n            bgState: 1,\n            bgOpacity: 0.5,\n            opacity: 1,\n            width: 30,\n            height: 30,\n            //timeoutHidden: 99999000,\n            timeoutHidden: 5000,\n        }\n    }\n\n    componentDidCatch(error, errorInfo) {\n        mp.trigger('client:ui:debug', 'Chat.jsx', error, errorInfo); // eslint-disable-line\n    }\n\n    componentWillUnmount() {\n        EventManager.removeHandler('chat');\n    }\n\n    componentDidMount() {\n        let chat =\n        {\n            size: 0,\n            history_limit: 50,  //Change this if you want to hold more/less chat history\n            container: null,\n            input: null,\n            enabled: false,\n            active: true,\n            bgState: this.state.bgState,\n            bgOpacity: this.state.bgOpacity,\n            timeoutHidden: this.state.timeoutHidden,\n        };\n\n        let closeTimeout = null;\n\n        if (chat.bgState === 2)\n            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, \" + chat.bgOpacity + \")\");\n\n        EventManager.addHandler('chat', value => {\n            if (value.type == 'hideHud') {\n                document.getElementById('chat').style.display = 'none';\n            }\n            if (value.type == 'showHud') {\n                document.getElementById('chat').style.display = 'block';\n            }\n            if (value.type == 'updateSettings') {\n                this.setState({\n                    fontFamily: value.fontFamily,\n                    fontSize: value.fontSize,\n                    lineHeight: value.lineHeight,\n                    fontWeight: value.fontWeight,\n                    fontOutline: value.fontOutline,\n                    bgState: value.bgState,\n                    bgOpacity: value.bgOpacity,\n                    opacity: value.opacity,\n                    width: value.width,\n                    height: value.height,\n                    timeoutHidden: value.timeoutHidden,\n                });\n\n                chat.bgState = value.bgState;\n                chat.bgOpacity = value.bgOpacity;\n                chat.timeoutHidden = value.timeoutHidden;\n\n                if (chat.bgState === 2)\n                    $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, \" + chat.bgOpacity + \")\");\n                else\n                    $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, 0)\");\n\n\n                $(\"#chat_messages\").fadeIn('fast');\n                if (closeTimeout) {\n                    clearTimeout(closeTimeout);\n                    closeTimeout = null;\n                }\n                if (chat.timeoutHidden < 99999000) {\n                    closeTimeout = setTimeout(function () {\n                        $(\"#chat_messages\").fadeOut('slow')\n                    }, chat.timeoutHidden);\n                }\n            }\n            if (value.type == 'push') {\n                chatAPI.push(value.message);\n            }\n            if (value.type == 'activate') {\n                chatAPI.activate(value.enable);\n            }\n            if (value.type == 'show') {\n                chatAPI.show(value.toggle);\n            }\n            if (value.type == 'clear') {\n                chatAPI.clear();\n            }\n            else return;\n        });\n\n        function enableChatInput(enable) {\n            try {\n                mp.trigger(\"chatEnabled\", enable); // eslint-disable-line\n            }\n            catch (e) {\n                console.log(e);\n            }\n\n            try {\n                if (enable) {\n                    if (closeTimeout) {\n                        clearTimeout(closeTimeout);\n                        closeTimeout = null;\n                    }\n                    $(\"#chat_messages\").fadeIn('fast');\n                }\n                else {\n                    $(\"#chat_messages\").fadeIn('fast');\n                    if (closeTimeout) {\n                        clearTimeout(closeTimeout);\n                        closeTimeout = null;\n                    }\n                    if (chat.timeoutHidden < 99999000) {\n                        closeTimeout = setTimeout(function () {\n                            $(\"#chat_messages\").fadeOut('slow')\n                        }, chat.timeoutHidden);\n                    }\n                }\n\n                if (chat.active == false\n                    && enable == true)\n                    return;\n\n                if (enable != (chat.input != null)) {\n                    //chat_printing = enable;\n                    try {\n                        mp.invoke(\"focus\", enable); // eslint-disable-line\n                    }\n                    catch (e) {\n                        console.log(e);\n                    }\n\n                    if (enable) {\n                        chat.input = $(\"#chat\").append('<div><input onkeyup=\"chatOnKeyUp()\" id=\"chat_msg\" type=\"text\" /></div>').children(\":last\");\n                        chat.input.children(\"input\").focus();\n\n                        if (chat.bgState === 1)\n                            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, \" + chat.bgOpacity + \")\");\n                        else if (chat.bgState === 2)\n                            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, \" + chat.bgOpacity + \")\");\n                        else\n                            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, 0)\");\n                    }\n                    else {\n                        chat.input.fadeOut('fast', function () {\n                            chat.input.remove();\n                            chat.input = null;\n                        });\n\n                        if (chat.bgState === 1)\n                            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, 0)\");\n                        else if (chat.bgState === 2)\n                            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, \" + chat.bgOpacity + \")\");\n                        else\n                            $('#chat_messages').css(\"background-color\", \"rgba(0, 0, 0, 0)\");\n                    }\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n\n        var timeOut = null;\n        function chatOnKeyUp() {\n            try {\n                if (timeOut) {\n                    clearTimeout(timeOut);\n                    timeOut = null;\n                }\n                else\n                    mp.trigger('client:chatTyping', true); // eslint-disable-line\n\n                timeOut = setTimeout(function () {\n                    mp.trigger('client:chatTyping', false); // eslint-disable-line\n                    timeOut = null;\n                }, 1000);\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n\n        function getIndicesOf(searchStr, str, caseSensitive) {\n            var searchStrLen = searchStr.length;\n            if (searchStrLen == 0) {\n                return [];\n            }\n            var startIndex = 0, index, indices = [];\n            if (!caseSensitive) {\n                str = str.toLowerCase();\n                searchStr = searchStr.toLowerCase();\n            }\n            while ((index = str.indexOf(searchStr, startIndex)) > -1) {\n                indices.push(index);\n                startIndex = index + searchStrLen;\n            }\n            return indices;\n        }\n\n        var chatAPI =\n        {\n            push: (text) => {\n                try {\n                    let textResult = escapeHtml(text);\n\n                    var matchColors = /!\\{#\\w*\\}/gi;\n                    var match = textResult.match(matchColors);\n                    if (match !== null) {\n\n                        for (let i = 0; i < match.length; i++) {\n                            let clr = match[i].replace(match[i], match[i].replace('!{', '').replace('}', ''));\n                            textResult = textResult.replace(match[i], '<span style=\"color: ' + clr + '\">');\n                        }\n\n                        for (let i = 0; i < match.length; i++) {\n                            textResult += '</span>';\n                        }\n                    }\n\n                    matchColors = /!\\{\\w*\\}/gi;\n                    match = textResult.match(matchColors);\n                    if (match !== null) {\n\n                        for (let i = 0; i < match.length; i++) {\n                            let clr = match[i].replace(match[i], match[i].replace('!{', '').replace('}', ''));\n                            textResult = textResult.replace(match[i], '<span style=\"color: #' + clr + '\">');\n                        }\n\n                        for (let i = 0; i < match.length; i++) {\n                            textResult += '</span>';\n                        }\n                    }\n\n                    chat.container.prepend(\"<li>\" + textResult + \"</li>\");\n\n                    chat.size++;\n\n                    if (chat.size >= chat.history_limit) {\n                        chat.container.children(\":last\").remove();\n                    }\n\n                    $(\"#chat_messages\").fadeIn('fast');\n                    if (closeTimeout) {\n                        clearTimeout(closeTimeout);\n                        closeTimeout = null;\n                    }\n                    if (chat.timeoutHidden < 99999000) {\n                        closeTimeout = setTimeout(function () {\n                            $(\"#chat_messages\").fadeOut('slow')\n                        }, chat.timeoutHidden);\n                    }\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            },\n\n            clear: () => {\n                try {\n                    chat.container.html(\"\");\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            },\n\n            activate: (toggle) => {\n                try {\n                    if (toggle == false\n                        && (chat.input != null))\n                        enableChatInput(false);\n\n                    chat.active = toggle;\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            },\n\n            show: (toggle) => {\n                try {\n                    if (toggle)\n                        $(\"#chat\").show();\n                    else\n                        $(\"#chat\").hide();\n\n                    chat.active = toggle;\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n        };\n\n        var entityMap = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#39;',\n            '/': '&#x2F;',\n            '`': '&#x60;',\n            '=': '&#x3D;'\n        };\n\n        function escapeHtml(string) {\n            return String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\n                return entityMap[s];\n            });\n        }\n\n        $(document).ready(function () {\n            chat.container = $(\"#chat ul#chat_messages\");\n\n            $(\".ui_element\").show();\n            chatAPI.push(\"Sveiki atvykę į RevolutionRP\");\n            chatAPI.push(\"Perskaitykite ir laikykitės serverio taisyklių\");\n\n            $(\"body\").keydown(function (event) {\n                if (event.which == 84 && chat.input == null\n                    && chat.active == true) {\n                    enableChatInput(true);\n                    event.preventDefault();\n                }\n                else if (event.which == 13 && chat.input != null) {\n                    var value = chat.input.children(\"input\").val();\n\n                    if (value.length > 0) {\n                        if (value[0] == \"/\") {\n                            value = value.substr(1);\n\n                            if (value.length > 0)\n                            {\n                                try {\n                                    mp.invoke(\"command\", value); // eslint-disable-line\n                                }\n                                catch (e) {\n                                    console.log(e);\n                                }\n                            }\n                        }\n                        else {\n                            try {\n                                mp.invoke(\"chatMessage\", value); // eslint-disable-line\n                            }\n                            catch (e) {\n                                console.log(e);\n                            }\n                        }\n                    }\n\n                    enableChatInput(false);\n                }\n            });\n        });\n    }\n\n    render() {\n        if (!this.state.show) {\n            return null;\n        }\n        return (\n            <React.Fragment>\n                <div id=\"chat\" style={\n                    {\n                        width: this.state.width + '%',\n                        height: this.state.height + '%',\n                        opacity: this.state.opacity,\n                        fontWeight: this.state.fontWeight + 'px',\n                        fontFamily: this.state.fontFamily,\n                        fontSize: this.state.fontSize + 'px',\n                        lineHeight: this.state.lineHeight + 'px'\n                    }\n                } className=\"ui_element\">\n                    <ul id=\"chat_messages\"></ul>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}